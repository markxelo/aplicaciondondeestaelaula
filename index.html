<!DOCTYPE html>
<html>
  <head>
    <title>Donde Esta el Aula Aplicacion</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
    </style>
	<link rel="stylesheet" href="styles/styles.css" type="text/css">
	<link rel="stylesheet" type="text/css" media="all" href="styles/style-autocomplete.css">
	<script src="jquery.js"></script>
	
	<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="js/jquery.autocomplete.min.js"></script>
	<script type="text/javascript" src="js/currency-autocomplete.js">
	
	
	


	<script type="text/javascript">

	$(document).ready(function(){

		$.getJSON("http://localhost/dondeestaelaulayii/index.php/api/posts", function(data) {  
		   
		  

		   $.each(data, function(index, objetoDelListado)
		   {
		   			var opcion = new Option(objetoDelListado.nombre, objetoDelListado.id); 
		   			

		   			alert('qe+');
		   			document.form1.lista2.add(opcion);
		   			document.form1.lista.add(opcion);
		   	});
		});
	});

	



	function traertodos(){
	$.getJSON("http://localhost/dondeestaelaulayii/index.php/api/posts", function(data) {  
	   
	  

	   $.each(data, function(index, objetoDelListado)
	   {
	   			
	          $("#texto").append(objetoDelListado.id); 
	           $("#texto").append('<br/>');
	          $("#texto").append(objetoDelListado.nombre);
	           $("#texto").append('<br/>');
	          $("#texto").append(objetoDelListado.lat);
	           $("#texto").append('<br/>');
	          $("#texto").append(objetoDelListado.long);
	           $("#texto").append('<br/>');
	});  
	}); }

	
	function actualizar(id){
		$(document).ready(function(){
			$.ajax({
				type: "PUT",
				dataType: "json",
				contentType: 'text/html',
				url:"http://localhost/dondeestaelaulayii/index.php/api/posts/".id,
				data:"{'id':"+id+", 'nombre':'Aula 43'}",
				success: function(data) {
					
					$("#texto2").append(data.nombre);
					if (data.id != null) {
						   
						alert(data.id);
	            	}
				},
				error: function (xhr) {
					console.log(xhr.responseText);
					alert('no anda');
				}
			});
		});
	}

	function traeruno(){
		
			$.ajax({
				type: "GET",
				dataType: "json",
				contentType: 'text/html',
				url:"http://localhost/dondeestaelaulayii/index.php/api/posts/"+ document.form1.lista.value ,
				data:"{}",
				success: function(data) {
					$("#texto2").append("****************");
					$("#texto2").append('<br/>');
					$("#texto2").append("ID = "+data.id); 
	           		$("#texto2").append('<br/>');
	          		$("#texto2").append("Nombre = "+data.nombre);
		           	$("#texto2").append('<br/>');
		          	$("#texto2").append("Latitud = "+data.lat);
		           	$("#texto2").append('<br/>');
		          	$("#texto2").append("Longitud = "+data.long);
		          	$("#texto2").append('<br/>');
					$("#texto2").append("****************");
		           	
				},
				error: function (xhr) {
					console.log(xhr.responseText);
					alert('no anda');
				}
			});
		
	}

	function crear(){
		$(document).ready(function(){
			$.ajax({
				type: "POST",
				dataType: "json",
				contentType: "text/html",
				url:"http://localhost/dondeestaelaulayii/index.php/api/posts",
				data:"{'nombre':'Aula Nueva', 'lat':'123', 'long':'234', 'idestablecimiento':'2', 'qr': 'blabla'}",
				success: function(data) {
					
					$("#texto2").append(data.nombre);
					if (data.id != null) {
						   
						alert(data.id);
	            	}
				},
				error: function (xhr) {
					console.log(xhr.responseText);
					alert('no anda');
				}
			});
		});
	}

	function borrar(){
		$(document).ready(function(){
			$.ajax({
				type: "DELETE",
				dataType: "json",
				contentType: "text/html",
				url:"http://localhost/dondeestaelaulayii/index.php/api/posts/15",
				
				success: function(data) {
					
					$("#texto2").append(data.nombre);
					if (data.id != null) {
						   
						alert(data.id);
	            	}
				},
				error: function (xhr) {
					console.log(xhr.responseText);
					alert('no anda');
					alert(xhr.responseText);
				}
			});
		});
	};

	function cargarForm(){
		$.getJSON("http://localhost/dondeestaelaulayii/index.php/api/posts", function(data) {  
		   
		  

		   $.each(data, function(index, objetoDelListado)
		   {
		   			 
		   			document.form1.Nombre.value=objetoDelListado.nombre;
		   			
		});

	})}

	</script>
	
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-wy3gEj28ulO-x2JJmk6EGybl8fPRAl0&sensor=TRUE"></script>
    <script>
			var map;
			function initialize() {
			  var mapOptions = {
				zoom: 17,
				
			  };
			  map = new google.maps.Map(document.getElementById('map-canvas'),
				  mapOptions);
				  
				/* inicio kml */
				var ctaLayer = new google.maps.KmlLayer({
					url: 'https://maps.google.com.ar/maps/ms?msid=207415282598937372097.0004dd56bdd970597a5b8&msa=0&ll=-38.941056751547386,-68.05727183818817&spn=0.006943,0.012403&output=kml'
				  });
				  ctaLayer.setMap(map);
				/* fin kml */
						
				/* inicio marcador , trae todos los puntos de aulas */
				
				$.getJSON("http://localhost/dondeestaelaulayii/index.php/api/posts", function(data) {    

				   $.each(data, function(index, objetoDelListado)
				   {
						var myLatlng = new google.maps.LatLng(objetoDelListado.lat,objetoDelListado.long);
				
						 var marker = new google.maps.Marker({
							position: myLatlng,
							map: map,
							draggable:false, 
							animation: google.maps.Animation.DROP,
							title:objetoDelListado.nombre
						});
				});  
				});
				
				
				
				/* fin marcador */
			}
			
			function pincheaula() {
				
				var myLatlng = new google.maps.LatLng(-38.941056751547386,-68.05727183818817);
				
				 var marker = new google.maps.Marker({
					position: myLatlng,
					map: map,
					draggable:false, 
					animation: google.maps.Animation.DROP,
					title:"Aula 43"
				});
			}
			
			google.maps.event.addDomListener(window, 'load', initialize);
			
    </script>
  </head>
  <body id="top" onload="traertodos()">
	<div class="wrapper col2">
	  <div id="topbar">
		<div id="topnav">
		  <ul>
			<li class="active"><a href="index.html">Inicio</a></li>
			<li><a href="consultas.html">consultas</a></li>			
			<li><a href="quien.php">Quienes Somos</a></li>
			<li class="last"><a href="ayuda.html">Ayuda</a></li>
		  </ul>
		</div>
		<div id="search">
		  <form >
			<fieldset>
			  <legend>Buscar Aula</legend>
			  <input type="text" name="currency" class="biginput" id="autocomplete" onfocus="this.value='';">
			  <input type="submit" name="go" id="go" value="Buscar">
			</fieldset>
		  </form>
		</div>
		<br class="clear">
	  </div>
	</div>
	
	
    <div id="map-canvas"></div>
	
	
   
  </body>
</html>
